# Multi-Perspective Decision Making Protocol (The "Three Agents" Model)

本ドキュメントは、重要な意思決定（ADR 策定、アーキテクチャ設計、複雑な仕様策定）において適用される「3 つの視点」による合議プロトコルを定義する。

## 1. Core Concept

単一の視点によるバイアスを防ぎ、堅牢かつ革新的な解を導き出すため、以下の 3 つの仮想エージェント（ペルソナ）を脳内でシミュレートし、議論させる。

| Agent           | Persona                    | Role & Focus                                                                                    | Key Question                                             |
| :-------------- | :------------------------- | :---------------------------------------------------------------------------------------------- | :------------------------------------------------------- |
| **Affirmative** | **The Proponent (推進者)** | **Value, Speed, Innovation**<br>メリットを最大化し、可能性を広げる。楽観的。                    | 「最高の結果はどうなるか？」「どうすれば実現できるか？」 |
| **Critical**    | **The Skeptic (批判者)**   | **Risk, Security, Debt**<br>欠陥、エッジケース、将来の負債を指摘する。悲観的。                  | 「最悪の場合どうなるか？」「何が壊れるか？」             |
| **Mediator**    | **The Architect (調停者)** | **Synthesis, Balance, Decision**<br>両者の意見を統合し、現実的な落とし所（Trade-off）を決める。 | 「今、我々が取るべき最善のバランスは何か？」             |

## 2. Execution Flow

複雑なタスク（目安: 影響範囲が複数のファイルに及ぶ、または不可逆な決定を含むもの）において、以下のステップを実行する。

### Step 1: Divergence (発散)

Mediator が議題を提示し、Affirmative と Critical がそれぞれの立場から意見を出し尽くす。

- **Affirmative**: ユーザーメリット、開発効率、新技術の導入メリットを列挙。
- **Critical**: セキュリティリスク、パフォーマンス懸念、保守コスト、移行の難易度を列挙。

### Step 2: Debate (議論)

対立するポイントについて、具体的な解決策や緩和策を検討する。
（例: Critical「セキュリティが不安だ」 -> Affirmative「では認証層を強化しよう」）

### Step 3: Convergence (収束)

Mediator が議論を整理し、最終的な決定（Decision）を下す。
決定内容は **ADR (Architecture Decision Record)** または **仕様書** に反映される。
必ず「採用しなかった選択肢」とその理由も記録すること。

## 3. Output Format (Example)

思考プロセス（Thought Process）において、以下のような形式で記録することを推奨する。

```markdown
### Multi-Perspective Analysis

**[Affirmative]**:

- X を採用することで、開発速度が 2 倍になる。
- 最新のライブラリ機能を使えるため、UX が向上する。

**[Critical]**:

- X はまだベータ版であり、API が不安定なリスクがある。
- 既存の Y との互換性を維持するためのラッパーが必要になり、複雑化する。

**[Mediator]**:

- 開発速度は魅力的だが、安定性を犠牲にはできない。
- **結論**: X を採用するが、コア機能への導入は避け、まずは周辺機能で試験導入する（段階的移行）。
- **Action**: ラッパー層の設計をタスクに追加する。
```

## 4. When to Use

- 新しいライブラリやフレームワークの選定時
- データベーススキーマの変更時
- 既存コードの大規模なリファクタリング時
- ユーザー要件が曖昧で、複数の解釈が可能な時
